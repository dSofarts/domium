@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

SHOW_PERSON_OUTLINE()

Person(client, "Client", "Заказчик")
Person(manager, "Manager", "Менеджер/специалист")
Person(admin, "Admin", "Администратор")

System_Boundary(sys, "Domium Platform") {
  System(core, "Core Backend Services", "Project, Building, Documents, Chat")
  System(frontend, "Web PWA", "Frontend")
}

System_Ext(keycloak, "Keycloak", "Auth Server (OAuth 2.0 / OIDC)")
System_Ext(rtsp, "RTSP Source", "IP-Камера")

Rel(client, frontend, "Использует", "HTTPS")
Rel(manager, frontend, "Использует", "HTTPS")
Rel(admin, keycloak, "Управляет", "Web Admin UI")

Rel(frontend, keycloak, "Login / Tokens", "OIDC")
Rel(frontend, core, "REST / WebSocket", "через API Gateway")

Rel(core, keycloak, "Проверяет токены", "JWT / Introspection")
Rel(core, rtsp, "Получает видеопотоки", "RTSP")

@enduml